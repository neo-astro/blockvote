

<h1 class="my-3 primary-color fw-bold f-6 text-center m-auto">
  Consulta de Resultados publicos o Privados en los que Paticipó
</h1>



          

  <div class=" mx-5 mt-5 " style="border-radius: 18px;
  box-shadow:  5px 5px 9px #eaeaea,
              -5px -5px 9px #e6e5e5;;min-height: 60vh; "  >

    <div class="d-flex justify-content-center w-auto gap-5">
        

      <div class="form-floating mt-4">
        <input #inputNombreProceso id="nombreProceso" 
        (change)="buscarProceso()"
        style="
        box-shadow:  5px 5px 9px #eaeaea,
              -5px -5px 9px #e6e5e5; " 
        class="form-control input" 
        type="text" id="floatingInputTitulo" placeholder="Elecciones precidenciales">
        <label for="floatingInputTitulo"  >
          Nombre del proceso
          <svg  xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><g fill="none" stroke="#7c3aed" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" color="#7c3aed"><path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10s10-4.477 10-10"/><path d="M14.4 14.4L16 16m-.8-4.4a3.6 3.6 0 1 0-7.2 0a3.6 3.6 0 0 0 7.2 0"/></g></svg>      </label>        
      </div>  

      <div class="mt-4 form-floating align-content-center justify-content-center gap-3 d-flex w-auto">
        <p class="fw-semibold fs-6 text-center m-auto  primary-color">
          Fecha de inicio 
        </p> 

         <div class="d-flex w-100">
        <input class="form-control input w-100"
        onclick="this.showPicker()" 
        (input)="buscarProceso()"
        #inputFecha
        id="inputFecha"
        type="date"
        style=" 
        box-shadow:  5px 5px 9px #eaeaea,
              -5px -5px 9px #e6e5e5; ">

            <button  (click)="resetFecha()" style="margin-left: -40px !important ;inset-inline: none; border-color: none;border: none; " class="btn bg-white btnAction">
              <svg  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash " viewBox="0 0 16 16">
                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
              </svg>                   
            </button>      
            
          </div>
      </div>

    </div>

   <div class="" *ngIf="listaProcesos" class="d-flex  align-content-start ">
      <button (click)="obtenerProcesoResultado(proceso.id, proceso.titulo,proceso.resultadoPublico)"   class="mt-3 p-0 m-0" *ngFor="let proceso of listaProcesos" style="border: none; margin-left: 30px !important; border-radius: 3px; background: #ffffff;box-shadow:  5px 5px 9px #efefef, -5px -5px 9px #ffffff;   width: 280px;height: 190px;" >
          <div  class= "bg-primary-color fs-5 fw-bold h-25 w-100  p-0  justify-content-center align-content-center text-capitalize text-white rounded-bottom-1">
             {{proceso.titulo}}
         </div> 
          <div class="d-flex flex-column justify-content-center  m-0 mt-2 p-0 h-75">
            <div class="mt-2 p-0 fw-bold fs-6">Inicia:</div>
            <div class="p-0  fs-mini">{{proceso.fechaInicio | date:"MMM dd, yyyy ' a las ' hh:mm a" }}</div>
            <div class="mt-2 p-0 fw-bold fs-6">Finaliza:</div>
            <div class="p-0 fs-mini" >{{proceso.fechaFin | date:"MMM dd, yyyy ' a las ' hh:mm a" }}</div>
            <div class="rounded-5 fs-6 text-white fw-bold w-50 m-auto bg-success"  *ngIf="proceso.resultadoPublico">Público</div>
            <div class="rounded-5 fs-6 text-white fw-bold w-50 m-auto bg-danger" style="background-color: rgb(230, 158, 107);"  *ngIf="proceso.resultadoPublico==false ">Privado</div>
          </div>

      </button>
   </div>

  <div  class=" d-flex justify-content-center align-content-center"  style="min-height: 260px !important"  *ngIf="listaProcesos.length === 0 && searchInit == true" >
    <div  class="m-auto fs-3" >No hay registros disponibles</div>
  </div>
 

  <div class="mt-3 d-flex gap-5 justify-content-start align-content-start" *ngIf="listaProcesos.length === 0">
    <section class="card-item m-0 p-0" [ngClass]="{'fade-out':show}" *ngIf="show == true">
      <div class="card-detail">
        <h3 class="title -loading"></h3>
        <p class="description -loading"></p>
        <h3 class="title -loading"></h3>
      </div>
    </section>

    <section class="card-item m-0 p-0" [ngClass]="{'fade-out':show}" *ngIf="show == true">
      <div class="card-detail">
        <h3 class="title -loading"></h3>
        <p class="description -loading"></p>
        <h3 class="title -loading"></h3>
      </div>
    </section>

    <section class="card-item m-0 p-0" [ngClass]="{'fade-out':show}" *ngIf="show == true">
      <div class="card-detail">
        <h3 class="title -loading"></h3>
        <p class="description -loading"></p>
        <h3 class="title -loading"></h3>
      </div>
    </section>

    <section class="card-item m-0 p-0" [ngClass]="{'fade-out':show}" *ngIf="show == true">
      <div class="card-detail">
        <h3 class="title -loading"></h3>
        <p class="description -loading"></p>
        <h3 class="title -loading"></h3>
      </div>
    </section>

   
  </div>



</div>



<!-- modal formulario -->

<div class="w-100 h-100 bg-white text-center"
  style="position: absolute; left: 0; top: 0; z-index: 2;"
  [ngClass]="{'d-none': !showFormulario, 'fade-in': showFormulario}">
  
  <div class="d-flex flex-column align-content-center justify-content-center" style="min-height: 100vh;">
    <h3 class="fw-bold primary-color text-center px-5">Se requieren su Información Personal para acceder a los resultados</h3>

    <div class="d-flex flex-column justify-content-center text-center">
      <form [formGroup]="form" class="w-100">
        <div class="form-floating mt-4 w-25 m-auto">
          <input formControlName="email"
            id="email"
            class="form-control input"
            type="text"
            placeholder="Correo Electrónico"
            style="box-shadow: 5px 5px 9px #eaeaea, -5px -5px 9px #e6e5e5;">
          <label for="email" class="color-primary">Correo Electrónico</label>
          <div class="text-danger fs-6 mt-1" *ngIf="form.get('email').invalid && form.get('email').touched">
            <div *ngIf="form.get('email').errors.required">Campo requerido</div>
            <div *ngIf="form.get('email').errors.email">Compruebe su correo Electrónico</div>
          </div>
        </div>

        <div class="form-floating mt-4 w-25 m-auto">
          <input formControlName="identificacion"
            id="identificacion"
            maxlength="10"
            class="form-control input"
            type="text"
            placeholder="Identificación"
            style="box-shadow: 5px 5px 9px #eaeaea, -5px -5px 9px #e6e5e5;">
          <label for="identificacion" class="color-primary">Identificación</label>
          <div class="text-danger fs-6 mt-1" *ngIf="form.get('identificacion').invalid && form.get('identificacion').touched">
            <div *ngIf="form.get('identificacion').errors.required">Campo requerido</div>
            <div *ngIf="form.get('identificacion').errors.pattern">La identificación solo admite números</div>
          </div>
        </div>

        <div class="d-flex justify-content-center gap-3" style="margin-top: 50px;">
          <button [disabled]="form.invalid || load==true" (click)="obtenerProcesoResultadPrivado()" style="min-width: 10vw;" class="bg-primary-color btn btn-action text-white">
            <div   >
              Solicitar
            </div> 
  
            
           
          </button>
          <button (click)="form.reset()" style="min-width: 10vw;" class="btn bg-primary-color btn-action text-white" (click)="showFormulario = !showFormulario">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- modal resultados-->



<div class="w-100 h-100 bg-white text-center "
  style="position: absolute;left: 0px;top: 0px;z-index: 1035;"
  [ngClass]="{'d-none': showProcesoResultado ==false, 'fade-in': showProcesoResultado==true}"
  >
  
  <div class="d-flex align-content-center justify-content-center" style="min-width: 100vw; min-height: 100vh;"  >
    <ngx-charts-bar-vertical *ngIf="showProcesoResultado ==true" style="margin-top: 100px;"
    [view]="view"
    [scheme]="colorScheme"
    [results]="resConteoCandidatos"
    [gradient]="gradient"
    [legend]="showLegend"
    [xAxis]="showXAxis"
    [yAxis]="showYAxis"
    [showXAxisLabel]="showXAxisLabel"
    [showYAxisLabel]="showYAxisLabel"
    [xAxisLabel]="xAxisLabel"
    [yAxisLabel]="yAxisLabel"
    (select)="onSelect($event)">
  </ngx-charts-bar-vertical>
</div>
<button (click)="showProcesoResultado=false" class="btn rounded-circle position-absolute top-0 end-0 m-2" style="border-radius: 3px;
background: #f7f7f7;
box-shadow:  5px 5px 9px #b8b8b8,
             -5px -5px 9px #ffffff;" >
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="#7c82ff" d="M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12z"/></svg>
</button>

</div>